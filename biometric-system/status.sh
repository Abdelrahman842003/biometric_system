#!/bin/bash

# ุนุฑุถ ุญุงูุฉ ุงููุธุงู ููุนูููุงุช ุงูุชุดุบูู
# System Status and Running Information

clear

echo "๐ ุญุงูุฉ ูุธุงู ุฅุฏุงุฑุฉ ุฃุฌูุฒุฉ ุงูุจุงูููุชุฑู"
echo "===================================="
echo ""

# ูุญุต ุญุงูุฉ ุงูุฎุงุฏู
echo "๐ ูุญุต ุญุงูุฉ ุงูุฎุงุฏู..."
if lsof -i :8000 >/dev/null 2>&1; then
    echo "โ ุงูุฎุงุฏู ูุนูู ุนูู ุงููููุฐ 8000"
    echo "๐ ุงูุฑุงุจุท: http://localhost:8000/"
    echo ""
    
    # ูุญุต ุงุณุชุฌุงุจุฉ ุงูุฎุงุฏู
    if curl -s http://localhost:8000/ >/dev/null 2>&1; then
        echo "โ ุงููุธุงู ูุณุชุฌูุจ ุจุดูู ุตุญูุญ"
    else
        echo "โ๏ธ  ุงูุฎุงุฏู ูุนูู ููู ูุฏ ุชููู ููุงู ูุดููุฉ ูู ุงูุงุณุชุฌุงุจุฉ"
    fi
else
    echo "โ ุงูุฎุงุฏู ุบูุฑ ููุดุบู"
    echo ""
    echo "๐ก ูุชุดุบูู ุงููุธุงู:"
    echo "   ./start.sh"
    echo "   ุฃู"
    echo "   php -S localhost:8000"
fi

echo ""
echo "===================================="
echo ""

# ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅุฐุง ูุงู ุงูุฎุงุฏู ูุนูู
if lsof -i :8000 >/dev/null 2>&1; then
    echo "๐ ูุญุต ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
    
    # ูุญุงููุฉ ุงููุตูู ูููุทุฉ ูุญุต ุญุงูุฉ ุงููุธุงู
    if curl -s http://localhost:8000/api/system-status.php 2>/dev/null | grep -q "database"; then
        echo "โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตูุฉ"
    else
        echo "โ๏ธ  ูุฏ ุชุญุชุงุฌ ูุชุซุจูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช"
        echo "๐ก ุงุฐูุจ ุฅูู: http://localhost:8000/install.php"
    fi
    
    echo ""
    echo "๐ฏ ุฑูุงุจุท ูููุฉ:"
    echo "   ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ: http://localhost:8000/"
    echo "   ููุญุฉ ุงูุชุญูู: http://localhost:8000/admin/dashboard.php"
    echo "   ุชุซุจูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช: http://localhost:8000/install.php"
fi

echo ""
echo "===================================="
echo ""
echo "๐ ูููุณุงุนุฏุฉ: ./help.sh"
echo "๐ ูุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู: ./start.sh"
echo ""
